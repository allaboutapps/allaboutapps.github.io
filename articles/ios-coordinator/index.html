<!DOCTYPE html>
<html lang='en'>

<head>
  <meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='description' content='In our apps, we use the MVVM (Model-View-ViewModel) approach.
This concept manages the interaction within a view controller, but who manages the view controllers?

The Coordinator!'>
<meta name='theme-color' content='#EB5D24'>

<meta property='og:title' content='iOS Coordinators • Michael Heinzl'>
<meta property='og:description' content='In our apps, we use the MVVM (Model-View-ViewModel) approach.
This concept manages the interaction within a view controller, but who manages the view controllers?

The Coordinator!'>
<meta property='og:url' content='https://code.allaboutapps.at/articles/ios-coordinator/'>
<meta property='og:site_name' content='all about apps'>
<meta property='og:type' content='article'><meta property='og:image' content='https://code.allaboutapps.at/images/ios-coordinator/mvvm-c.png'><meta property='article:section' content='Articles'><meta property='article:published_time' content='2019-05-14T10:00:00&#43;02:00'/><meta property='article:modified_time' content='2019-05-14T10:00:00&#43;02:00'/><meta name='twitter:card' content='summary_large_image'><meta property='twitter:image' content='https://code.allaboutapps.at/images/ios-coordinator/mvvm-c.png'>

<meta name="generator" content="Hugo 0.56.3" />

  <title>iOS Coordinators • Michael Heinzl</title>
  <link rel='canonical' href='https://code.allaboutapps.at/articles/ios-coordinator/'>
  
  
  <link rel='icon' href='/favicon.ico'>
<link rel='stylesheet' href='/assets/css/main.d599583a.css'><link rel='stylesheet' href='/css/custom.css'><style>
:root{--color-accent:#EB5D24;}
</style>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-46375725-3', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  

</head>


<body class='page type-articles has-cover has-sidebar'>

  <div class='site'>

    <div id='sidebar' class='sidebar'>
  <a class='screen-reader-text' href='#main-menu'>Skip to Main Menu</a>

  <div class='container'><section class='widget widget-about sep-after'>
  <header>
    
    <div class='logo'>
      <a href='/'>
        <img src='/images/logo.png'>
      </a>
    </div>
    
    <h2 class='title site-title '>
    all about apps
    </h2>
    <div class='desc'>
    code
    </div>
  </header>

</section>
<section class='widget widget-sidebar_menu sep-after'><nav id='sidebar-menu' class='menu sidebar-menu' aria-label='Sidebar Menu'>
    <div class='container'>
      <ul><li class='item'>
  <a href='/'>Home</a></li><li class='item'>
  <a href='/categories/android/'>Android</a></li><li class='item'>
  <a href='/categories/ios/'>iOS</a></li><li class='item'>
  <a href='/categories/web/'>Web</a></li><li class='item'>
  <a href='/articles/'>All Articles</a></li><li class='item'>
  <a href='/about/'>About</a></li></ul>
    </div>
  </nav>

</section></div>

  <div class='sidebar-overlay'></div>
</div>

    <div class='main'>

      <a class='screen-reader-text' href='#content'>Skip to Content</a>

<button id='sidebar-toggler' class='sidebar-toggler' aria-controls='sidebar'>
  <span class='screen-reader-text'>Toggle Sidebar</span>
  <span class='open'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="3" y1="12" x2="21" y2="12" />
  <line x1="3" y1="6" x2="21" y2="6" />
  <line x1="3" y1="18" x2="21" y2="18" />
  
</svg>
</span>
  <span class='close'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="18" y1="6" x2="6" y2="18" />
  <line x1="6" y1="6" x2="18" y2="18" />
  
</svg>
</span>
</button>

      <header id='header' class='header site-header'>
        <div class='container sep-after'>
          <div class='header-info'><p class='site-title title'>all about apps</p>
              <p class='desc site-desc'>code</p></div>
        </div>
      </header>

      <main id='content'>


<article lang='en' class='entry'>
  <header class='header entry-header'>
  <div class='container sep-after'>
    <div class='header-info'>
      <h1 class='title'>iOS Coordinators</h1>
      

    </div>
    
<div class='entry-meta'>
  <span class='posted-on'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
  <line x1="16" y1="2" x2="16" y2="6"/>
  <line x1="8" y1="2" x2="8" y2="6"/>
  <line x1="3" y1="10" x2="21" y2="10"/>
  
</svg>
<span class='screen-reader-text'>Posted on </span>
  <time class='entry-date' datetime='2019-05-14T10:00:00&#43;02:00'>2019, May 14</time>
</span>

  <span class='byline'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M21,21V20c0-2.76-4-5-9-5s-9,2.24-9,5v1"/>
  <path d="M16,6.37A4,4,0,1,1,12.63,3,4,4,0,0,1,16,6.37Z"/>
  
</svg>
<span class='screen-reader-text'> by </span><a href='/authors/mhe'>Michael Heinzl</a></span>
  

</div>


  </div>
</header>

  <div class='entry-cover'>
  <figure class='container cover-normal'>
    <img src='/images/ios-coordinator/mvvm-c.png'/>
    
  </figure>
</div>
  

  <div class='container entry-content'>
  <p>In our apps, we use the <a href="https://www.objc.io/issues/13-architecture/mvvm/" target="_blank">MVVM (Model-View-ViewModel)</a> approach.
This concept manages the interaction within a view controller, but who manages the view controllers?</p>

<h1 id="the-coordinator">The Coordinator!</h1>

<p>More precisely, multiple coordinators manage almost all view controllers in our apps. Coordinators are arranged in a tree structure, each coordinator is responsible for certain UI flow (a bunch of view controllers) in the app.</p>

<p>Let start with a simple example. A registration flow with a single input per screen.</p>

<p><img src="/images/ios-coordinator/example.png" alt="MVVM+C" /></p>

<p>This is an implementation of a registration coordinator which manages our registration flow. Each screen enters one value and adds information to our user object to complete the registration. The <code>RegistrationCoordinator</code> is a subclass of <code>NavigationCoordinator</code>. A <code>NavigationCoordinator</code> manages a <code>UINavigationController</code>. So our <code>RegistrationCoordinator</code> is completely in charge of the order and presentation of its view controllers. View controllers do <strong>not</strong> present the next view controller. View controllers are not responsible for presenting other view controllers, this is the job and responsibility of the coordinator. The view controllers only report to the coordinator (using a closure or delegate) if the user completed a task such as entering an email address.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">RegisterCoordinator</span>: NavigationCoordinator {
	
	<span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">Step</span> {
		<span style="color:#66d9ef">case</span> email
		<span style="color:#66d9ef">case</span> password
		<span style="color:#66d9ef">case</span> firstName
		<span style="color:#66d9ef">case</span> lastName
	}

	<span style="color:#66d9ef">var</span> didFinish: ((User) -&gt; Void)?
	<span style="color:#66d9ef">var</span> didCancel: (() -&gt; Void)?

	<span style="color:#66d9ef">let</span> steps: [Step] = [ .email, .password, .firstName, .lastName]

	<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">start</span>() {
		showNext(step: .email)
	}

	<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">showNext</span>(step: Step) {
		<span style="color:#66d9ef">let</span> viewController = createViewController(with: step)
		push(viewController, animated: <span style="color:#66d9ef">true</span>)
	}

	<span style="color:#75715e">// ...</span>
}</code></pre></div>

<p>As mentioned before, coordinators are organised in a hierarchy. At the root, we have an <code>AppCoordinator</code> which manages all user flows in our app. A coordinator can have multiple child coordinators, which represent features of the app such as the <code>RegistrationCoordinator</code> shown above.</p>

<p>We have two kinds of base coordinators: <code>NavigationCoordinator</code> and <code>TabBarCoordinator</code>.</p>

<p><img src="/images/ios-coordinator/schema.png" alt="Schema" /></p>

<h2 id="reusable-view-controllers">Reusable View Controllers</h2>

<p>In our approach view controllers have a well-defined task and interface (= input &amp; output). For example, the task of a <code>TextInputViewController</code> is simple: it takes a text input from the user and reports it by calling the  <code>didEnterText</code> closure.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-swift" data-lang="swift"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">TextInputViewController</span>: UIViewController {
	
	<span style="color:#75715e">// </span><span style="color:#75715e">MARK:</span><span style="color:#75715e"> - Output</span>

	<span style="color:#66d9ef">var</span> didEnterText: ((String) -&gt; Void)?

	<span style="color:#75715e">// </span><span style="color:#75715e">MARK:</span><span style="color:#75715e"> - Input</span>

	<span style="color:#66d9ef">var</span> viewModel: TextInputViewModel!

	<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">func</span> create(viewModel: TextInputViewModel) -&gt; <span style="color:#66d9ef">Self</span> {
		<span style="color:#66d9ef">let</span> viewController = UIStoryboard(.onboarding).instantiateViewController(<span style="color:#66d9ef">self</span>)
		viewController.viewModel = viewModel
		<span style="color:#66d9ef">return</span> viewController
	}	

	<span style="color:#75715e">// ...</span>
}</code></pre></div>

<p>The coordinator which uses the <code>TextInputViewController</code> implements this closure and acts accordingly. In our registration example the coordinator would present the next step or finish the registration. That view controller does not know which view controller will be presented next as this is the responsibility of the coordinator. That way the <code>TextInputViewController</code> can be easily <strong>reused</strong> on multiple occasions across the app in different user flows.</p>

<h2 id="recap">Recap</h2>

<p>At first, this concept may look a little over-engineered and complex. And to be honest, for a small and simple app it probably is. But in our experience simple apps usually do not stay simple, they grow! Using this approach at the start of a project eases the way for future updates. The clear structure and delegation of responsibility from the view controller to the coordinator makes a project easier to maintain and simpler to collaborate on well-defined UI flows or reusable view controllers.</p>

<p>Check out our coordinator implementation in our <code>iOS Starter</code> project on Github: <a href="https://github.com/allaboutapps/ios-starter" target="_blank">https://github.com/allaboutapps/ios-starter</a></p>

<h3 id="additional-resources">Additional resources</h3>

<ul>
<li><a href="https://www.hackingwithswift.com/articles/71/how-to-use-the-coordinator-pattern-in-ios-apps" target="_blank">How to use the coordinator pattern in iOS apps</a></li>
<li><a href="https://www.swiftbysundell.com/posts/navigation-in-swift" target="_blank">Navigation in Swift</a></li>
<li><a href="http://khanlou.com/2015/10/coordinators-redux/" target="_blank">Coordinators Redux</a></li>
<li><a href="https://davedelong.com/blog/2017/11/06/a-better-mvc-part-1-the-problems/" target="_blank">A Better MVC</a></li>
</ul>
</div>

  
<footer class='entry-footer'>
  <div class='container sep-before'>
  <div class='categories'>
  <span class='taxonomy-icon'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M22,19a2,2,0,0,1-2,2H4a2,2,0,0,1-2-2V5A2,2,0,0,1,4,3H9l2,3h9a2,2,0,0,1,2,2Z"/>
  
</svg>
</span>
  <span class='screen-reader-text'>Categories: </span><a class='category' href='/categories/ios'>iOS</a></div>

  </div>
</footer>


</article>

<nav class='entry-nav'>
  <div class='container'><div class='prev-entry sep-before'>
      <a href='/articles/android-jetpack-navigation-pitfalls/'>
        <span aria-hidden='true'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="20" y1="12" x2="4" y2="12"/>
  <polyline points="10 18 4 12 10 6"/>
  
</svg>
 Previous</span>
        <span class='screen-reader-text'>Previous post: </span>Android Jetpack Navigation Pitfalls &amp; Tricks</a>
    </div><div class='next-entry sep-before'>
      <a href='/articles/nodejs-june-meetup/'>
        <span class='screen-reader-text'>Next post: </span>Nodejs June Meetup<span aria-hidden='true'>Next <svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="4" y1="12" x2="20" y2="12"/>
  <polyline points="14 6 20 12 14 18"/>
  
</svg>
</span>
      </a>
    </div></div>
</nav>




      </main>

      <footer id='footer' class='footer'>
        <div class='container sep-before'><section class='widget widget-social_menu sep-after'><nav aria-label='Social Menu'>
    <ul><li>
        <a href='https://github.com/allaboutapps' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Open Github account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/>
  
</svg>
</a>
      </li><li>
        <a href='https://facebook.com/itsallaboutapps' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Open Facebook account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"/>
  
</svg>
</a>
      </li><li>
        <a href='https://twitter.com/itsallaboutapps' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Open Twitter account in new tab</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"/>
  
</svg>
</a>
      </li><li>
        <a href='mailto:office@allaboutapps.at' target='_blank' rel='noopener'>
          <span class='screen-reader-text'>Contact via Email</span><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
  <polyline points="22,6 12,13 2,6"/>
  
</svg>
</a>
      </li></ul>
  </nav>
</section><div class='copyright'>
  <p> &copy; 2018-2019 all about apps </p>
</div>

        </div>
      </footer>

    </div>
  </div><script>window.__public_path__='\/assets\/js\/'</script>

<script src='/assets/js/main.d853fa3a.js'></script><script src='/js/custom.js'></script>



</body>

</html>

